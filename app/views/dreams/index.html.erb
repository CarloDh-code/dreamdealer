<h1 class="text-center my-4">Ready to dream?</h1>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 md-8 my-3">
      <%= form_with url: dreams_path, method: :get, local: true do %>
        <div class="form-group">
          <%= label_tag :query, "Search" %>
          <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "Search for a dream..." %>
        </div>
        <div class="category-filters">
          <h4>Filter by category:</h4>
          <div class="categories-list">
            <% @categories.each do |category| %>
              <%= link_to category, dreams_path(category: category, query: params[:query], sort: params[:sort]), class: "btn btn-outline-primary category-btn #{'active' if params[:category] == category}" %>
            <% end %>
            <%= link_to "All Categories", dreams_path(query: params[:query], sort: params[:sort]), class: "btn btn-outline-secondary #{'active' if params[:category].blank?}" %>
          </div>
        </div>
        <div class="form-group">
          <%= label_tag :sort, "Sort by" %>
          <%= select_tag :sort, options_for_select([['Recently Added', 'recent'], ['Best Rated', 'best_rated']], params[:sort]), include_blank: "Default", class: "form-control" %>
        </div>
        <div class="form-group">
          <%= submit_tag "Apply Filters", class: "btn btn-primary" %>
        </div>
        <div class="reset-filters">
          <%= link_to "Reset all filters", dreams_path, class: "btn btn-outline-primary category-btn" %>
        </div>
  <div class="row">
    <% @dreams.each do |dream| %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
        <%= link_to dream_path(dream), class: "text-decoration-none" do %>
          <div class="card h-100 rounded-5 position-relative">
            <% if dream.photos.attached? %>
              <%= cl_image_tag(dream.photos[0].key, crop: :fill, class: 'card-img-top same-size rounded-top-5', alt: dream.title) %>
            <% else %>
              <%= image_tag 'dreamdefault.png', class: 'card-img-top same-size', alt: dream.title %>
            <% end %>
            <div class="card-body text-center">
              <h4 class="card-title"><%= dream.title %></h4>
              <p class="card-text">
                <strong><%= dream.price_per_night %>â‚¬</strong> per night
                <br>
                <% if dream.reviews.empty? %>
                  3.0 <i class="fa fa-star"></i>
                <% else %>
                  <%= dream.average_rating %> <i class="fa fa-star"></i>
                <% end %>
              </p>
              <p class="text-secondary">Hosted by: <strong><%= dream.user.nickname %></strong></p>
              <p class="text-secondary">Category: <strong><%= dream.category %></strong></p>
            </div>
            <% if dream.age_limit.present? && dream.age_limit < 18 %>
              <div class="age-logo">
                :dix_huit_ans_minimum:
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
     </div>
      <% end %>
    </div>
  </div>
<style>
  /* Make sure all images have the same size */
  .same-size {
    width: 100%;
    height: 250px; /* Adjust the height to whatever fits your design */
    object-fit: cover; /* Ensures the image fills the container without distortion */
  }
</style>

