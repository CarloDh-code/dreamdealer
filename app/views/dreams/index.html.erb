<h1 class="text-center my-4">Ready to dream?</h1>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8 my-3">
      <%= form_with url: dreams_path, method: :get, class: "input-group shadow rounded" do %>
        <%= text_field_tag :query,
              params[:query],
              class: "form-control form-control-lg",
              placeholder: "Search for a dream...",
              aria: { label: "Search for a dream" }
          %>
        <button type="submit" class="btn btn-primary btn-lg">
          <i class="fas fa-search"></i>
        </button>
      <% end %>
    </div>
  </div>
  <div class="row">
    <% @dreams.each do |dream| %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
        <%= link_to dream_path(dream), class: "text-decoration-none" do %>
          <div class="card rounded-5" data-aos="zoom-in">
            <% if dream.photos.attached? %>
              <%= cl_image_tag(dream.photos[0].key, crop: :fill, class: 'card-img-top same-size rounded-top-5', alt: dream.title) %>
            <% else %>
              <%= image_tag 'dreamdefault.png', class: 'card-img-top same-size', alt: dream.title %>
            <% end %>
            <div class="card-body text-center">
              <h4 class="card-title"><%= dream.title %></h4>
              <p class="card-text">
                <strong><%= dream.price_per_night %>â‚¬</strong> per night
                <br>
                <% if dream.reviews.empty? %>
                  3.0 <i class="fa fa-star"></i>
                <% else %>
                <%= dream.average_rating %> <i class="fa fa-star"></i>
                <% end %>
              </p>
              <p class="text-secondary">Hosted by: <strong><%= dream.user.nickname %></strong></p>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>



<style>
  /* Make sure all images have the same size */
  .same-size {
    width: 100%;
    height: 250px; /* Adjust the height to whatever fits your design */
    object-fit: cover; /* Ensures the image fills the container without distortion */
  }
</style>
